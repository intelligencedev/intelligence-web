<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>intelligence.dev — Home of Manifold</title>
    <meta name="description" content="Articles and experiments on artificial intelligence, software engineering, and computational simulation." />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <script defer src="https://cdn.jsdelivr.net/npm/animejs@2.2.0/anime.min.js"></script>
    <style>
        :root{
            --bg:#0b0c10;
            --panel:#0f1117;
            --text:#e6edf3;
            --muted:#8b98a5;
            --brand:#61f4d0;
            --brand-2:#6aaefc;
            --border:rgba(230,237,243,0.08);
            --shadow:0 10px 30px rgba(0,0,0,0.35);
        }
        *{box-sizing:border-box}
    html,body{height:100%; overflow-x:hidden}
        body{
            margin:0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
            color:var(--text);
            background:radial-gradient(1200px 800px at 80% -10%, rgba(106,174,252,0.10), transparent 60%),
                                 radial-gradient(900px 700px at 10% 20%, rgba(97,244,208,0.10), transparent 60%),
                                 var(--bg);
            line-height:1.6;
        }
        a{color:inherit;text-decoration:none}
        .wrap{max-width:1100px;margin:0 auto;padding:24px}

        /* Header */
        header{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
        .brand{display:flex;align-items:center;gap:12px}
        .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:var(--shadow)}
        .brand h1{font-size:18px;margin:0;font-weight:650;letter-spacing:.2px}
        nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
        nav a{color:var(--muted)}
        nav a:hover{color:var(--text)}

        /* Hero */
        .hero{display:grid;grid-template-columns:1.15fr 1fr;gap:48px;align-items:center;padding:72px 0}
        .title{font-size:clamp(32px,6vw,64px);font-weight:800;letter-spacing:-.02em;line-height:1.05;margin:0}
        .title .accent{background:linear-gradient(90deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
        .subtitle{color:var(--muted);margin-top:16px;font-size:clamp(16px,2.5vw,18px)}
        .cta-row{display:flex;gap:14px;margin-top:28px}
        .btn{padding:12px 18px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.02);backdrop-filter:saturate(140%) blur(4px);color:var(--text)}
        .btn.primary{border-color:transparent;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#061014;font-weight:700}
        .meta{display:flex;gap:18px;margin-top:22px;color:var(--muted);font-size:14px}

        /* Feature list */
        .features{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-top:48px}
        .card{border:1px solid var(--border);border-radius:14px;padding:18px;background:var(--panel);box-shadow:var(--shadow)}
        .card h3{margin:0 0 6px 0;font-size:16px}
        .card p{margin:0;color:var(--muted);font-size:14px}

    /* Screenshots */
    .screenshot-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-top:16px}
    .screenshot{padding:0;overflow:hidden}
    .screenshot img{display:block;width:100%;height:auto;aspect-ratio:16/10;object-fit:cover;cursor:zoom-in}

    /* Lightbox modal */
    .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,0.6);backdrop-filter:blur(2px);z-index:1000}
    .lightbox.open{display:grid}
    .lightbox-content{position:relative;max-width:min(95vw,1200px);max-height:90vh}
    .lightbox-content img{display:block;max-width:100%;max-height:90vh;width:auto;height:auto;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);background:var(--panel)}
    .lightbox-close{position:absolute;top:8px;right:8px;border:1px solid var(--border);background:rgba(0,0,0,0.5);color:var(--text);padding:6px 10px;border-radius:8px;cursor:pointer}

    /* Visual teaser */
    .scene{position:relative;height:360px;border:1px solid var(--border);border-radius:16px;overflow:hidden;background:linear-gradient(180deg,#0f1219,#0b0c10)}
    .grid{position:absolute;inset:0;background-image:linear-gradient(rgba(230,237,243,0.06) 1px,transparent 1px),linear-gradient(90deg,rgba(230,237,243,0.06) 1px,transparent 1px);background-size:40px 40px;mask-image:radial-gradient(70% 70% at 50% 50%, #000, transparent);z-index:0}
    .scene svg{position:absolute;inset:0;width:100%;height:100%;display:block;z-index:1}
    .link{stroke:rgba(230,237,243,0.35);stroke-width:1.35}
    .node{fill:var(--brand);}
    .node.b{fill:var(--brand-2)}
    .node-glow{filter:blur(6px);opacity:.35}
        .underline{display:inline-block;height:3px;width:0;background:linear-gradient(90deg,var(--brand),var(--brand-2));border-radius:2px;margin-top:8px}

        footer{padding:64px 0 24px 0;color:var(--muted);font-size:14px}
        footer .grid{background-size:32px 32px;opacity:.4}

        /* Responsive */
        @media (max-width: 980px){
            .hero{grid-template-columns:1fr;gap:28px;padding:48px 0}
            .scene{height:280px}
            .features{grid-template-columns:1fr 1fr}
            .screenshot-grid{grid-template-columns:1fr 1fr}
        }
        @media (max-width: 640px){
            .features{grid-template-columns:1fr}
            nav{display:none}
            .screenshot-grid{grid-template-columns:1fr}
        }

        /* Reduce motion */
        @media (prefers-reduced-motion: reduce){
            *{animation: none !important; transition: none !important}
        }
    </style>
</head>
<body>
    <div class="wrap">
        <header aria-label="Site header">
            <div class="brand">
                <h1>intelligence.dev</h1>
            </div>
            <nav aria-label="Primary">
                <ul>
                    <li><a href="/codewiki/">Manifold Code Wiki</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <section class="hero" id="hero">
                <div>
                    <h2 class="title">
                        Think. Type. <span class="accent">Done.</span>
                        <span class="underline" id="title-underline" aria-hidden="true"></span>
                    </h2>
                    <p class="subtitle">Manifold is a platform for researching, developing, and deploying systems using AI specialists.</p>
                    <div class="meta" role="contentinfo">
                        <span>Connect ideas</span>
                        <span>Collaborate with Specialists</span>
                        <span>Create your vision</span>
                    </div>
                    <div class="cta-row">
                        <a class="btn primary" href="https://github.com/intelligencedev/manifold/tree/develop">Deploy Manifold</a>
                    </div>
                </div>
                <div class="scene" aria-hidden="true">
                    <div class="grid"></div>
                    <svg id="graph" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid slice" aria-hidden="true"></svg>
                </div>

            </section>

            <section id="topics" aria-labelledby="topics-title">
                <h3 id="topics-title" style="margin:0 0 12px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:.12em">Features</h3>
                <div class="features">
                    <article class="card">
                        <h3>AI Specialists</h3>
                        <p>Design AI specialists with access to tools and MCP servers.</p>
                    </article>
                    <article class="card">
                        <h3>Workflow Canvas</h3>
                        <p>Design workflows using a visual node based interface.</p>
                    </article>
                    <article class="card">
                        <h3>Projects, Experiments, Visualization</h3>
                        <p>Manifold provides tools for designing and visualizing simple or complex software systems.</p>
                    </article>
                </div>
            </section>

            <!-- Screenshots section -->
            <section id="screenshots" style="margin-top:48px" aria-labelledby="screenshots-title">
                <h3 id="screenshots-title" style="margin:0 0 12px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:.12em">Screenshots</h3>
                <div class="screenshot-grid">
                    <figure class="card screenshot">
                        <img src="/assets/img/chat.png" alt="Chat interface screenshot" loading="lazy" decoding="async">
                    </figure>
                    <figure class="card screenshot">
                        <img src="/assets/img/flow.png" alt="Workflow canvas screenshot" loading="lazy" decoding="async">
                    </figure>
                    <figure class="card screenshot">
                        <img src="/assets/img/specialists.png" alt="Specialists view screenshot" loading="lazy" decoding="async">
                    </figure>
                </div>
            </section>

            <section id="visuals" style="margin-top:48px">
                <h3 style="margin:0 0 12px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:.12em">Made with Manifold</h3>
                <div class="features">
                    <a class="card" href="/vis/galaxy/"><h3>Galaxy</h3><p>N‑body inspired particle fields.</p></a>
                    <a class="card" href="/vis/vortex/"><h3>Vortex</h3><p>Fluid-like shader exploration.</p></a>
                    <a class="card" href="/vis/vterrain/"><h3>Terrain</h3><p>Procedural landscapes.</p></a>
                </div>
            </section>
        </main>

        <footer>
            <div class="grid" aria-hidden="true" style="height:1px"></div>
            <div style="display:flex;justify-content:space-between;gap:16px;align-items:center;margin-top:18px">
                <span>© <span id="year"></span> intelligence.dev</span>
                <span><a href="https://github.com/intelligencedev" target="_blank" rel="noopener">GitHub</a></span>
            </div>
        </footer>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Image preview">
        <div class="lightbox-content" role="document">
            <button type="button" class="lightbox-close" aria-label="Close preview">✕</button>
            <img id="lightbox-img" alt="">
        </div>
    </div>

    <script>
        // Wait for window load to ensure DOM is ready and all animations can start
        window.addEventListener('load', function(){
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            document.getElementById('year').textContent = new Date().getFullYear();

            // If anime isn't available or user prefers reduced motion, skip animations.
            if (typeof anime === 'undefined' || prefersReduced) {
                if (typeof anime === 'undefined') console.warn('anime.js not available; animations skipped.');
                return;
            }

            // anime.js v2 compatible usage (no destructuring helpers)
            // Headline underline
            // var underline = document.getElementById('title-underline');
            // anime({
            //     targets: underline,
            //     width: ['0%', '100%'],
            //     duration: 900,
            //     delay: 200,
            //     easing: 'easeOutCubic'
            // });

            // Cards rise-in
            anime({
                targets: '.card',
                translateY: [8, 0],
                opacity: [0, 1],
                duration: 500,
                delay: function(el, i){ return 350 + i * 80; },
                easing: 'easeOutCubic'
            });

            // Graph visualization (nodes + links) inside #graph SVG
            var svg = document.getElementById('graph');
            var width = 1000, height = 600;
            var nodeCount = 9;
            var maxNodes = 21;
            var nextId = nodeCount;

            // Create SVG groups
            var linkGroup = document.createElementNS('http://www.w3.org/2000/svg','g');
            var glowGroup = document.createElementNS('http://www.w3.org/2000/svg','g');
            var nodeGroup = document.createElementNS('http://www.w3.org/2000/svg','g');
            svg.appendChild(linkGroup);
            svg.appendChild(glowGroup);
            svg.appendChild(nodeGroup);

            // Generate nodes
            var nodes = Array.from({length: nodeCount}, function(_, i){
                return {
                    id: i,
                    x: Math.random()*width,
                    y: Math.random()*height,
                    vx: 0,
                    vy: 0,
                    r: 3 + Math.random()*3,
                    group: i % 3
                };
            });

            // Generate links (connect near neighbors + some random long edges)
            var links = [];
            for (var i=0;i<nodeCount;i++){
                for (var j=i+1;j<nodeCount;j++){
                    if (Math.abs(i-j) <= 2 && Math.random() < 0.9) {
                        links.push({ source: i, target: j, w: 1 });
                    } else if (Math.random() < 0.06) {
                        links.push({ source: i, target: j, w: 0.6 });
                    }
                }
            }

            // Build SVG elements
            var linkEls = links.map(function(l){
                var e = document.createElementNS('http://www.w3.org/2000/svg','line');
                e.setAttribute('class','link');
                e.setAttribute('stroke-opacity', l.w);
                linkGroup.appendChild(e);
                return e;
            });

            var glowEls = nodes.map(function(n){
                var e = document.createElementNS('http://www.w3.org/2000/svg','circle');
                e.setAttribute('class','node node-glow');
                glowGroup.appendChild(e);
                return e;
            });
            var nodeEls = nodes.map(function(n, i){
                var e = document.createElementNS('http://www.w3.org/2000/svg','circle');
                e.setAttribute('class', 'node' + (i % 2 ? ' b' : ''));
                nodeGroup.appendChild(e);
                return e;
            });

            function updateSVG(){
                // update links
                for (var i=0;i<links.length;i++){
                    var l = links[i];
                    var a = nodes[l.source], b = nodes[l.target];
                    linkEls[i].setAttribute('x1', a.x);
                    linkEls[i].setAttribute('y1', a.y);
                    linkEls[i].setAttribute('x2', b.x);
                    linkEls[i].setAttribute('y2', b.y);
                }
                // update nodes
                for (var k=0;k<nodes.length;k++){
                    var n = nodes[k];
                    nodeEls[k].setAttribute('cx', n.x);
                    nodeEls[k].setAttribute('cy', n.y);
                    nodeEls[k].setAttribute('r', n.r);
                    glowEls[k].setAttribute('cx', n.x);
                    glowEls[k].setAttribute('cy', n.y);
                    glowEls[k].setAttribute('r', n.r*3.5);
                }
            }

            // Simple force simulation (repulsion + spring + centering)
            function tick(){
                for (var i=0;i<nodes.length;i++){
                    var n = nodes[i];
                    // repulsion
                    for (var j=i+1;j<nodes.length;j++){
                        var m = nodes[j];
                        var dx = n.x - m.x;
                        var dy = n.y - m.y;
                        var d2 = dx*dx + dy*dy + 0.01;
                        var inv = 10 / d2; // repulsive strength
                        var fx = dx * inv;
                        var fy = dy * inv;
                        n.vx += fx; n.vy += fy;
                        m.vx -= fx; m.vy -= fy;
                    }
                }
                // springs
                for (var l=0;l<links.length;l++){
                    var link = links[l];
                    var a = nodes[link.source];
                    var b = nodes[link.target];
                    var dx = b.x - a.x;
                    var dy = b.y - a.y;
                    var dist = Math.sqrt(dx*dx + dy*dy) || 1;
                    var target = 70; // ideal link length
                    var k = 0.02; // spring constant
                    var F = (dist - target) * k;
                    var ux = dx / dist, uy = dy / dist;
                    var fx = F * ux, fy = F * uy;
                    a.vx += fx; a.vy += fy;
                    b.vx -= fx; b.vy -= fy;
                }
                // centering + damping and bounds
                for (var i2=0;i2<nodes.length;i2++){
                    var p = nodes[i2];
                    p.vx += (width/2 - p.x) * 0.0008;
                    p.vy += (height/2 - p.y) * 0.0008;
                    p.vx *= 0.92; p.vy *= 0.92;
                    p.x += p.vx; p.y += p.vy;
                    // keep within viewport softly
                    if (p.x < 20) { p.x = 20; p.vx *= -0.6; }
                    if (p.x > width-20) { p.x = width-20; p.vx *= -0.6; }
                    if (p.y < 20) { p.y = 20; p.vy *= -0.6; }
                    if (p.y > height-20) { p.y = height-20; p.vy *= -0.6; }
                }
                updateSVG();
            }

            // Add a new node every 2 seconds with nearest neighbor links and a pop-in
            function addNode(){
                if (nodes.length >= maxNodes) return;
                var targetR = 3 + Math.random()*3;
                var n = { id: nextId++, x: width/2 + (Math.random()-0.5)*60, y: height/2 + (Math.random()-0.5)*60, vx:0, vy:0, r: 0 };
                var nearest = nodes.map(function(m, idx){
                    var dx = m.x - n.x, dy = m.y - n.y; return { d: dx*dx + dy*dy, idx: idx };
                }).sort(function(a,b){ return a.d - b.d; }).slice(0, Math.min(3, nodes.length));

                nodes.push(n);

                var g = document.createElementNS('http://www.w3.org/2000/svg','circle');
                g.setAttribute('class','node node-glow');
                glowGroup.appendChild(g);
                glowEls.push(g);

                var c = document.createElementNS('http://www.w3.org/2000/svg','circle');
                c.setAttribute('class', 'node' + ((n.id % 2) ? ' b' : ''));
                nodeGroup.appendChild(c);
                nodeEls.push(c);

                nearest.forEach(function(entry){
                    var e = document.createElementNS('http://www.w3.org/2000/svg','line');
                    e.setAttribute('class','link');
                    e.setAttribute('stroke-opacity', 1);
                    linkGroup.appendChild(e);
                    linkEls.push(e);
                    links.push({ source: entry.idx, target: nodes.length-1, w: 1 });
                });

                anime({ targets: n, r: targetR, duration: 600, easing: 'easeOutBack' });
            }

            // Initial render once
            updateSVG();

            // Drive the simulation with a numeric driver for reliability in v2
            var driver = { t: 0 };
            anime({
                targets: driver,
                t: 1000000,
                duration: 600,
                easing: 'linear',
                update: tick,
                loop: true
            });

            // Start periodic additions
            setInterval(addNode, 2000);

            // Lightbox for screenshots
            var lb = document.getElementById('lightbox');
            var lbImg = document.getElementById('lightbox-img');
            var closeBtn = lb.querySelector('.lightbox-close');

            function openLightbox(src, alt){
                lbImg.src = src;
                lbImg.alt = alt || '';
                lb.classList.add('open');
                lb.setAttribute('aria-hidden','false');
                document.body.style.overflow = 'hidden';
                try { closeBtn.focus(); } catch (e) {}
            }
            function closeLightbox(){
                lb.classList.remove('open');
                lb.setAttribute('aria-hidden','true');
                document.body.style.overflow = '';
            }
            document.querySelectorAll('.screenshot img').forEach(function(img){
                img.addEventListener('click', function(){
                    openLightbox(img.getAttribute('src'), img.getAttribute('alt'));
                });
            });
            lb.addEventListener('click', function(e){
                if (e.target === lb) closeLightbox();
            });
            closeBtn.addEventListener('click', closeLightbox);
            document.addEventListener('keydown', function(e){
                if (e.key === 'Escape' && lb.classList.contains('open')) closeLightbox();
            });
            });
        </script>
</body>
</html>
